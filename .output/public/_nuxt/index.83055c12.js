import{j as i,r as N,w as m,b as r,e as u,u as w,F as b,f as y,m as v,q as d,p as o,s as A,o as l,c as k,t as S}from"./entry.57dd615b.js";import{A as j,_ as B}from"./ardb.bec4bd6a.js";const C={class:"h-full w-full flex flex-col items-center justify-center"},D=u("h1",{class:"text-2xl mt-4"},"Welcome to Arweave Nameserver Portal!",-1),E={class:"bg-neutral lg:w-1/2 xl:w-1/4 w-3/4 p-4 mt-4 flex flex-col items-center justify-center"},M=u("p",{class:"text-lg"},"Your names:",-1),T={key:0,class:"flex flex-col items-center w-full"},V={key:1,class:"p-3 mt-2 w-full text-center rounded flex flex-col text-gray-400 border-spacing-2 border-2 border-dashed border-gray-500"},U={__name:"index",async setup(F){let e,s;const p=i("arweave",()=>{j.init({host:"arweave.net",port:443,protocol:"https",timeout:6e4,logging:!1})}).value,g=i("ardb",()=>new B(p.value));let x=i("wallet",()=>null).value,_=g.value,c=N([]),h=([e,s]=m(async()=>_.search("transactions").appName("Arweave-Nameserver").tags([{name:"App-Name",values:["Arweave-Nameserver"]},{name:"Manager",values:[([e,s]=m(()=>x.getActiveAddress()),e=await e,s(),e)]}]).exclude(["anchor"]).findAll()),e=await e,s(),e);return c.value=([e,s]=m(async()=>Promise.all(h.map(async a=>{let f=await fetch("https://arweave.net/"+a.id).then(t=>t.json());console.log(a.id);let n=await _.search("transactions").sort("HEIGHT_DESC").from(f.managers).appName("Arweave-Nameserver").tags([{name:"Action",values:"UpdateName"},{name:"Manager-TX",values:[a.id]}]).exclude("anchor").limit(1).findOne()||a;return{id:a.id,domainName:n.tags.find(t=>t.name=="Domain-Name")?n.tags.find(t=>t.name=="Domain-Name").value:null}}))),e=await e,s(),e).filter(a=>a.domainName!=null),(a,f)=>{const n=A;return l(),r("div",C,[D,u("div",E,[M,w(c).length>0?(l(),r("div",T,[(l(!0),r(b,null,y(w(c),t=>(l(),k(n,{class:"my-2 p-4 bg-base-100 rounded-lg text-center w-full lg:w-1/2",to:"/manage/#"+t.id},{default:d(()=>[o(S(t.domainName),1)]),_:2},1032,["to"]))),256)),v(n,{to:"/create",class:"btn btn-outline mt-2 w-full"},{default:d(()=>[o("Add new name")]),_:1})])):(l(),r("div",V,[o(" You don't have any names yet. "),v(n,{to:"/create",class:"btn btn-outline mt-2"},{default:d(()=>[o("Add one!")]),_:1})]))])])}}};export{U as default};
