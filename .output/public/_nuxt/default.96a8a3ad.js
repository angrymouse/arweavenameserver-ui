import{r as nt,j as X,o as ue,b as fe,e as F,u as qe,F as it,z as st,m as ot}from"./entry.954ce471.js";import{c as xe,r as at,A as ut,_ as ft}from"./ardb.bec4bd6a.js";const Fe=()=>{for(var s=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,f=n.length;i<f;++i)s[i]=n[i],e[n.charCodeAt(i)]=i;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function c(h){var w=h.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=h.indexOf("=");M===-1&&(M=w);var C=M===w?0:4-M%4;return[M,C]}function k(h,w,M){return(w+M)*3/4-M}function b(h){var w,M=c(h),C=M[0],d=M[1],u=new t(k(h,C,d)),p=0,I=d>0?C-4:C,T;for(T=0;T<I;T+=4)w=e[h.charCodeAt(T)]<<18|e[h.charCodeAt(T+1)]<<12|e[h.charCodeAt(T+2)]<<6|e[h.charCodeAt(T+3)],u[p++]=w>>16&255,u[p++]=w>>8&255,u[p++]=w&255;return d===2&&(w=e[h.charCodeAt(T)]<<2|e[h.charCodeAt(T+1)]>>4,u[p++]=w&255),d===1&&(w=e[h.charCodeAt(T)]<<10|e[h.charCodeAt(T+1)]<<4|e[h.charCodeAt(T+2)]>>2,u[p++]=w>>8&255,u[p++]=w&255),u}function x(h){return s[h>>18&63]+s[h>>12&63]+s[h>>6&63]+s[h&63]}function A(h,w,M){for(var C,d=[],u=w;u<M;u+=3)C=(h[u]<<16&16711680)+(h[u+1]<<8&65280)+(h[u+2]&255),d.push(x(C));return d.join("")}function m(h){for(var w,M=h.length,C=M%3,d=[],u=16383,p=0,I=M-C;p<I;p+=u)d.push(A(h,p,p+u>I?I:p+u));return C===1?(w=h[M-1],d.push(s[w>>2]+s[w<<4&63]+"==")):C===2&&(w=(h[M-2]<<8)+h[M-1],d.push(s[w>>10]+s[w>>4&63]+s[w<<2&63]+"=")),d.join("")}return{toByteArray:b,fromByteArray:m}};function lt(s){let e=Re(s);return new TextDecoder("utf-8",{fatal:!0}).decode(e)}function ct(s){return new TextDecoder("utf-8",{fatal:!0}).decode(s)}function Ue(s){return new TextEncoder().encode(s)}function dt(s){return We(Ue(s))}function Re(s){return new Uint8Array(Fe().toByteArray(Ge(s)))}function Le(s){return Fe().fromByteArray(new Uint8Array(s))}function We(s){return De(Le(s))}function De(s){return s.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function Ge(s){s=s.replace(/\-/g,"+").replace(/\_/g,"/");let e;return s.length%4==0?e=0:e=4-s.length%4,s.concat("=".repeat(e))}const j={b64UrlToString:lt,bufferToString:ct,stringToBuffer:Ue,stringToB64Url:dt,b64UrlToBuffer:Re,bufferTob64:Le,bufferTob64Url:We,b64UrlEncode:De,b64UrlDecode:Ge};class ht{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?j.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:j.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?j.b64UrlToString(this[e]):j.b64UrlToBuffer(this[e]):this[e]}}class pt extends ht{constructor(e,t,n=!1){super(),this.name=e,this.value=t}}var Me={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Te;function Be(){if(Te)return Me;Te=1;var s;return function(e){(function(t){var n=typeof xe=="object"?xe:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),i=f(e);typeof n.Reflect>"u"?n.Reflect=e:i=f(n.Reflect,i),t(i);function f(c,k){return function(b,x){typeof c[b]!="function"&&Object.defineProperty(c,b,{configurable:!0,writable:!0,value:x}),k&&k(b,x)}}})(function(t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",f=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",c=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",k=typeof Object.create=="function",b={__proto__:[]}instanceof Array,x=!k&&!b,A={create:k?function(){return oe(Object.create(null))}:b?function(){return oe({__proto__:null})}:function(){return oe({})},has:x?function(r,o){return n.call(r,o)}:function(r,o){return o in r},get:x?function(r,o){return n.call(r,o)?r[o]:void 0}:function(r,o){return r[o]}},m=Object.getPrototypeOf(Function),h=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",w=!h&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:et(),M=!h&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:tt(),C=!h&&typeof WeakMap=="function"?WeakMap:rt(),d=new C;function u(r,o,a,l){if(S(a)){if(!Ae(r))throw new TypeError;if(!Pe(o))throw new TypeError;return re(r,o)}else{if(!Ae(r))throw new TypeError;if(!N(o))throw new TypeError;if(!N(l)&&!S(l)&&!G(l))throw new TypeError;return G(l)&&(l=void 0),a=L(a),ne(r,o,a,l)}}t("decorate",u);function p(r,o){function a(l,_){if(!N(l))throw new TypeError;if(!S(_)&&!Xe(_))throw new TypeError;ye(r,o,l,_)}return a}t("metadata",p);function I(r,o,a,l){if(!N(a))throw new TypeError;return S(l)||(l=L(l)),ye(r,o,a,l)}t("defineMetadata",I);function T(r,o,a){if(!N(o))throw new TypeError;return S(a)||(a=L(a)),_e(r,o,a)}t("hasMetadata",T);function Q(r,o,a){if(!N(o))throw new TypeError;return S(a)||(a=L(a)),ie(r,o,a)}t("hasOwnMetadata",Q);function K(r,o,a){if(!N(o))throw new TypeError;return S(a)||(a=L(a)),ve(r,o,a)}t("getMetadata",K);function ee(r,o,a){if(!N(o))throw new TypeError;return S(a)||(a=L(a)),me(r,o,a)}t("getOwnMetadata",ee);function te(r,o){if(!N(r))throw new TypeError;return S(o)||(o=L(o)),we(r,o)}t("getMetadataKeys",te);function O(r,o){if(!N(r))throw new TypeError;return S(o)||(o=L(o)),ge(r,o)}t("getOwnMetadataKeys",O);function R(r,o,a){if(!N(o))throw new TypeError;S(a)||(a=L(a));var l=z(o,a,!1);if(S(l)||!l.delete(r))return!1;if(l.size>0)return!0;var _=d.get(o);return _.delete(a),_.size>0||d.delete(o),!0}t("deleteMetadata",R);function re(r,o){for(var a=r.length-1;a>=0;--a){var l=r[a],_=l(o);if(!S(_)&&!G(_)){if(!Pe(_))throw new TypeError;o=_}}return o}function ne(r,o,a,l){for(var _=r.length-1;_>=0;--_){var q=r[_],y=q(o,a,l);if(!S(y)&&!G(y)){if(!N(y))throw new TypeError;l=y}}return l}function z(r,o,a){var l=d.get(r);if(S(l)){if(!a)return;l=new w,d.set(r,l)}var _=l.get(o);if(S(_)){if(!a)return;_=new w,l.set(o,_)}return _}function _e(r,o,a){var l=ie(r,o,a);if(l)return!0;var _=se(o);return G(_)?!1:_e(r,_,a)}function ie(r,o,a){var l=z(o,a,!1);return S(l)?!1:Ye(l.has(r))}function ve(r,o,a){var l=ie(r,o,a);if(l)return me(r,o,a);var _=se(o);if(!G(_))return ve(r,_,a)}function me(r,o,a){var l=z(o,a,!1);if(!S(l))return l.get(r)}function ye(r,o,a,l){var _=z(a,l,!0);_.set(r,o)}function we(r,o){var a=ge(r,o),l=se(r);if(l===null)return a;var _=we(l,o);if(_.length<=0)return a;if(a.length<=0)return _;for(var q=new M,y=[],g=0,v=a;g<v.length;g++){var P=v[g],E=q.has(P);E||(q.add(P),y.push(P))}for(var W=0,ke=_;W<ke.length;W++){var P=ke[W],E=q.has(P);E||(q.add(P),y.push(P))}return y}function ge(r,o){var a=[],l=z(r,o,!1);if(S(l))return a;for(var _=l.keys(),q=Ze(_),y=0;;){var g=Qe(q);if(!g)return a.length=y,a;var v=Je(g);try{a[y]=v}catch(P){try{Ke(q)}finally{throw P}}y++}}function be(r){if(r===null)return 1;switch(typeof r){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return r===null?1:6;default:return 6}}function S(r){return r===void 0}function G(r){return r===null}function ze(r){return typeof r=="symbol"}function N(r){return typeof r=="object"?r!==null:typeof r=="function"}function Ve(r,o){switch(be(r)){case 0:return r;case 1:return r;case 2:return r;case 3:return r;case 4:return r;case 5:return r}var a=o===3?"string":o===5?"number":"default",l=Ee(r,f);if(l!==void 0){var _=l.call(r,a);if(N(_))throw new TypeError;return _}return $e(r,a==="default"?"number":a)}function $e(r,o){if(o==="string"){var a=r.toString;if(B(a)){var l=a.call(r);if(!N(l))return l}var _=r.valueOf;if(B(_)){var l=_.call(r);if(!N(l))return l}}else{var _=r.valueOf;if(B(_)){var l=_.call(r);if(!N(l))return l}var q=r.toString;if(B(q)){var l=q.call(r);if(!N(l))return l}}throw new TypeError}function Ye(r){return!!r}function je(r){return""+r}function L(r){var o=Ve(r,3);return ze(o)?o:je(o)}function Ae(r){return Array.isArray?Array.isArray(r):r instanceof Object?r instanceof Array:Object.prototype.toString.call(r)==="[object Array]"}function B(r){return typeof r=="function"}function Pe(r){return typeof r=="function"}function Xe(r){switch(be(r)){case 3:return!0;case 4:return!0;default:return!1}}function Ee(r,o){var a=r[o];if(a!=null){if(!B(a))throw new TypeError;return a}}function Ze(r){var o=Ee(r,c);if(!B(o))throw new TypeError;var a=o.call(r);if(!N(a))throw new TypeError;return a}function Je(r){return r.value}function Qe(r){var o=r.next();return o.done?!1:o}function Ke(r){var o=r.return;o&&o.call(r)}function se(r){var o=Object.getPrototypeOf(r);if(typeof r!="function"||r===m||o!==m)return o;var a=r.prototype,l=a&&Object.getPrototypeOf(a);if(l==null||l===Object.prototype)return o;var _=l.constructor;return typeof _!="function"||_===r?o:_}function et(){var r={},o=[],a=function(){function y(g,v,P){this._index=0,this._keys=g,this._values=v,this._selector=P}return y.prototype["@@iterator"]=function(){return this},y.prototype[c]=function(){return this},y.prototype.next=function(){var g=this._index;if(g>=0&&g<this._keys.length){var v=this._selector(this._keys[g],this._values[g]);return g+1>=this._keys.length?(this._index=-1,this._keys=o,this._values=o):this._index++,{value:v,done:!1}}return{value:void 0,done:!0}},y.prototype.throw=function(g){throw this._index>=0&&(this._index=-1,this._keys=o,this._values=o),g},y.prototype.return=function(g){return this._index>=0&&(this._index=-1,this._keys=o,this._values=o),{value:g,done:!0}},y}();return function(){function y(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}return Object.defineProperty(y.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),y.prototype.has=function(g){return this._find(g,!1)>=0},y.prototype.get=function(g){var v=this._find(g,!1);return v>=0?this._values[v]:void 0},y.prototype.set=function(g,v){var P=this._find(g,!0);return this._values[P]=v,this},y.prototype.delete=function(g){var v=this._find(g,!1);if(v>=0){for(var P=this._keys.length,E=v+1;E<P;E++)this._keys[E-1]=this._keys[E],this._values[E-1]=this._values[E];return this._keys.length--,this._values.length--,g===this._cacheKey&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},y.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},y.prototype.keys=function(){return new a(this._keys,this._values,l)},y.prototype.values=function(){return new a(this._keys,this._values,_)},y.prototype.entries=function(){return new a(this._keys,this._values,q)},y.prototype["@@iterator"]=function(){return this.entries()},y.prototype[c]=function(){return this.entries()},y.prototype._find=function(g,v){return this._cacheKey!==g&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=g)),this._cacheIndex<0&&v&&(this._cacheIndex=this._keys.length,this._keys.push(g),this._values.push(void 0)),this._cacheIndex},y}();function l(y,g){return y}function _(y,g){return g}function q(y,g){return[y,g]}}function tt(){return function(){function r(){this._map=new w}return Object.defineProperty(r.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),r.prototype.has=function(o){return this._map.has(o)},r.prototype.add=function(o){return this._map.set(o,o),this},r.prototype.delete=function(o){return this._map.delete(o)},r.prototype.clear=function(){this._map.clear()},r.prototype.keys=function(){return this._map.keys()},r.prototype.values=function(){return this._map.values()},r.prototype.entries=function(){return this._map.entries()},r.prototype["@@iterator"]=function(){return this.keys()},r.prototype[c]=function(){return this.keys()},r}()}function rt(){var r=16,o=A.create(),a=l();return function(){function v(){this._key=l()}return v.prototype.has=function(P){var E=_(P,!1);return E!==void 0?A.has(E,this._key):!1},v.prototype.get=function(P){var E=_(P,!1);return E!==void 0?A.get(E,this._key):void 0},v.prototype.set=function(P,E){var W=_(P,!0);return W[this._key]=E,this},v.prototype.delete=function(P){var E=_(P,!1);return E!==void 0?delete E[this._key]:!1},v.prototype.clear=function(){this._key=l()},v}();function l(){var v;do v="@@WeakMap@@"+g();while(A.has(o,v));return o[v]=!0,v}function _(v,P){if(!n.call(v,a)){if(!P)return;Object.defineProperty(v,a,{value:A.create()})}return v[a]}function q(v,P){for(var E=0;E<P;++E)v[E]=Math.random()*255|0;return v}function y(v){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(v)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(v)):q(new Uint8Array(v),v):q(new Array(v),v)}function g(){var v=y(r);v[6]=v[6]&79|64,v[8]=v[8]&191|128;for(var P="",E=0;E<r;++E){var W=v[E];(E===4||E===6||E===8)&&(P+="-"),W<16&&(P+="0"),P+=W.toString(16).toLowerCase()}return P}}function oe(r){return r.__=void 0,delete r.__,r}})}(s||(s={})),Me}let Y;function J(s){if(typeof s!="function")throw new Error("This module should not be used in runtime. Instead, use a transformer during compilation.")}const le=Symbol("assertions");function _t(s,e){let t=e;for(const n of s.slice(1))t=t[n.startsWith("[")?parseInt(n.replace("[","").replace("]","")):n];return t}function vt(s,e,t){if(s===void 0)return"validation error";const n=_t(e,t);try{return s+", found: "+at().inspect(n)}catch{}try{return s+", found: "+JSON.stringify(n)}catch{}return s}class pe extends Error{constructor(e,t){super(vt(e.message,e.path,t)),this.name="TypeGuardError",this.path=e.path,this.reason=e.reason,this.input=t}}function mt(s,e={}){return Be(),function(t,n,i){const f=Reflect.getOwnMetadata(le,t,n)||[];Reflect.getOwnMetadata("design:returntype",t,n)===Promise?f[i]={assertion:s,options:Object.assign({async:!0},e)}:f[i]={assertion:s,options:e},Reflect.defineMetadata(le,f,t,n)}}function yt(s=pe){return Be(),function(e){for(const t of Object.getOwnPropertyNames(e.prototype)){const n=Reflect.getOwnMetadata(le,e.prototype,t);if(n){const i=e.prototype[t];e.prototype[t]=function(...f){for(let c=0;c<n.length;c++){if(!n[c])continue;const k=n[c].assertion(f[c]);if(k!==null){const b=new s(k,f[c]);if(n[c].options.async)return Promise.reject(b);throw b}}return i.apply(this,f)}}}}}function ce(s,e=Y){return J(e),e(s)===null}function de(s,e=Y){J(e);const t=e(s);if(t===null)return s;throw new pe(t,s)}function Ie(s=Y){return J(s),e=>ce(e,s)}function Ce(s=Y){return J(s),e=>de(e,s)}function wt(s){Y=s}var H={is:ce,assertType:de,createIs:Ie,createAssertType:Ce,equals:ce,createEquals:Ie,assertEquals:de,createAssertEquals:Ce,AssertType:mt,ValidateClass:yt,TypeGuardError:pe,setDefaultGetErrorObject:wt},V=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(f){return f instanceof t?f:new t(function(c){c(f)})}return new(t||(t=Promise))(function(f,c){function k(A){try{x(n.next(A))}catch(m){c(m)}}function b(A){try{x(n.throw(A))}catch(m){c(m)}}function x(A){A.done?f(A.value):i(A.value).then(k,b)}x((n=n.apply(s,e||[])).next())})},gt=globalThis&&globalThis.__rest||function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};function bt(s){return class extends s{constructor(...t){super(...t),this.namespaces={arweaveWallet:{walletName:"ArConnect",connect:()=>this.address||this.connect(),disconnect:()=>this.disconnect(),getActiveAddress:()=>this.address,getActivePublicKey:()=>this.getPublicKey(),getAllAddresses:()=>{throw"not implemented"},getWalletNames:()=>{throw"not implemented"},sign:(n,i)=>this.signTransaction(n,i),dispatch:(n,i)=>this.dispatch(n,i),encrypt:()=>{throw"not implemented"},decrypt:(n,i)=>this.decrypt(n,i),getPermissions:()=>["ACCESS_ADDRESS","ACCESS_PUBLIC_KEY","ACCESS_ALL_ADDRESSES","SIGN_TRANSACTION","ENCRYPT","DECRYPT","SIGNATURE","ACCESS_ARWEAVE_CONFIG","DISPATCH"],getArweaveConfig:()=>this.getArweaveConfig()}}}postMessage(t,n,i){return super.postMessage(t,n,Object.assign(Object.assign({},i),{protocol:"arweave",version:"1.0.0"}))}getPublicKey(){return V(this,void 0,void 0,function*(){const t=yield this.postMessage("getPublicKey");if(!H.is(t,n=>{function i(f){return typeof f!="string"?{}:null}return i(n)}))throw"TypeError";return t})}getArweaveConfig(){return V(this,void 0,void 0,function*(){const t=yield this.postMessage("getArweaveConfig");if(!H.is(t,n=>{function i(u){return u!==void 0?{}:null}function f(u){return typeof u!="string"?{}:null}function c(u){var p=[i,f];for(const T of p){var I=T(u);if(!I)return null}return{}}function k(u){return typeof u!="number"?{}:null}function b(u){var p=[i,f,k];for(const T of p){var I=T(u);if(!I)return null}return{}}function x(u){var p=[i,k];for(const T of p){var I=T(u);if(!I)return null}return{}}function A(u){return u!==!1?{}:null}function m(u){return u!==!0?{}:null}function h(u){var p=[i,A,m];for(const T of p){var I=T(u);if(!I)return null}return{}}function w(u){if(typeof u!="object"||u===null||Array.isArray(u))return{};if("protocol"in u){var p=c(u.protocol);if(p)return p}if("host"in u){var p=c(u.host);if(p)return p}if("port"in u){var p=b(u.port);if(p)return p}if("timeout"in u){var p=x(u.timeout);if(p)return p}if("logging"in u){var p=h(u.logging);if(p)return p}return null}function M(){return null}function C(u){if(typeof u!="object"||u===null||Array.isArray(u))return{};if("logger"in u){var p=M(u.logger);if(p)return p}return null}function d(u){var p=[w,C];for(const T of p){var I=T(u);if(I)return I}return null}return d(n)}))throw"TypeError";return delete t.logger,t})}signTransaction(t,n){var i;return V(this,void 0,void 0,function*(){const f=gt(t,["data","chunks"]),c=yield this.postMessage("signTransaction",[f,n]);if(!H.is(c,k=>{function b(d){return typeof d!="string"?{}:null}function x(d){return d!==void 0?{}:null}function A(d){return d!==null?{}:null}function m(d){var u=[x,A,b];for(const I of u){var p=I(d);if(!p)return null}return{}}function h(d){if(typeof d!="object"||d===null||Array.isArray(d))return{};if("name"in d){var u=b(d.name);if(u)return u}else return{};if("value"in d){var u=b(d.value);if(u)return u}else return{};return null}function w(d){if(!Array.isArray(d))return{};for(let p=0;p<d.length;p++){var u=h(d[p]);if(u)return u}return null}function M(d){var u=[x,A,w];for(const I of u){var p=I(d);if(!p)return null}return{}}function C(d){if(typeof d!="object"||d===null||Array.isArray(d))return{};if("id"in d){var u=b(d.id);if(u)return u}else return{};if("owner"in d){var u=m(d.owner);if(u)return u}if("tags"in d){var u=M(d.tags);if(u)return u}if("signature"in d){var u=b(d.signature);if(u)return u}else return{};if("reward"in d){var u=m(d.reward);if(u)return u}return null}return C(k)}))throw"TypeError";return t.setSignature({id:c.id,owner:c.owner||t.owner,tags:(i=c.tags)===null||i===void 0?void 0:i.map(k=>new pt(k.name,k.value,!0)),signature:c.signature,reward:c.reward||void 0}),t})}dispatch(t,n){return V(this,void 0,void 0,function*(){const i=yield this.postMessage("dispatch",[t,n],{transfer:!0});if(!H.is(i,f=>{function c(m){return typeof m!="string"?{}:null}function k(m){return m!=="BASE"?{}:null}function b(m){return m!=="BUNDLED"?{}:null}function x(m){var h=[k,b];for(const M of h){var w=M(m);if(!w)return null}return{}}function A(m){if(typeof m!="object"||m===null||Array.isArray(m))return{};if("id"in m){var h=c(m.id);if(h)return h}if("type"in m){var h=x(m.type);if(h)return h}return null}return A(f)}))throw"TypeError";return i})}decrypt(t,n){return V(this,void 0,void 0,function*(){const i=yield this.postMessage("decrypt",[t,n]);if(!ArrayBuffer.isView(i))throw"TypeError";const f=t.constructor;return new f(i.buffer)})}}}function At(s){return{all:s=s||new Map,on:function(e,t){var n=s.get(e);n?n.push(t):s.set(e,[t])},off:function(e,t){var n=s.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):s.set(e,[]))},emit:function(e,t){var n=s.get(e);n&&n.slice().map(function(i){i(t)}),(n=s.get("*"))&&n.slice().map(function(i){i(e,t)})}}}class He{constructor(){this.mittInstance=At()}emit(e,t){this.mittInstance.emit(e,t)}on(e,t){this.mittInstance.on(e,t)}off(e,t){this.mittInstance.off(e,t)}once(e,t){return new Promise(n=>{const i=f=>{this.off(e,i),n(f),t&&t(f)};this.on(e,i)})}}class Pt{constructor(){this._promiseController=[]}newMessagePromise(e,t){e.id=this._promiseController.length;const n=new Promise((i,f)=>this._promiseController.push({resolve:i,reject:f}));return t!=null&&t.timeout&&setTimeout(()=>this._promiseController[e.id].reject("timeout"),t.timeout),n}processResponse(e){const{id:t,result:n,error:i}=e;if(t!=null){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&isNaN(parseInt(t)))throw"error";if(!this._promiseController[+t])throw"received result to nonexistent request";return i!=null?this._promiseController[+t].reject(i):this._promiseController[+t].resolve(n),!0}}}const Oe="400",Se="600";class Et extends He{constructor(e,t){super(),this._iframe={},this._showIframe=!1,this._popup={},this._usePopup=!0,this._requirePopup=!1,this._keepPopup=!1,this._promiseController=new Pt,this._pending=[],this.listener=i=>{var f,c,k,b,x,A;if(i.source!==this._popup.window&&i.source!==((f=this._iframe)===null||f===void 0?void 0:f.window)||i.origin!==((c=this._url)===null||c===void 0?void 0:c.origin)||typeof i.data!="object")return;const{method:m,params:h,id:w,result:M,error:C,session:d}=i.data;if(console.info(`WalletConnector:${i.source===this._popup.window?"popup":"iframe"}`,i.data),w!=null&&(this._pending=this._pending.filter(p=>p!=w)),this._promiseController.processResponse(i.data)||typeof m!="string")return;if(m==="ready"){i.source===this._popup.window&&((b=(k=this._popup).resolve)===null||b===void 0||b.call(k)),i.source===this._iframe.window&&((A=(x=this._iframe).resolve)===null||A===void 0||A.call(x));return}if(m==="change")return;if(m==="showIframe"){if(typeof h!="boolean")return;this.showIframe=h}if(m==="usePopup"){if(typeof h!="boolean")return;this.setUsePopup(h)}if(m==="keepPopup"){if(typeof h!="boolean")return;this.setRequirePopup(h)}const u={method:m,params:h,session:d};if(!H.is(u,p=>{function I(O){return typeof O!="string"?{}:null}function T(){return null}function Q(O){return O!==void 0?{}:null}function K(O){return typeof O!="number"?{}:null}function ee(O){var R=[Q,I,K];for(const ne of R){var re=ne(O);if(!re)return null}return{}}function te(O){if(typeof O!="object"||O===null||Array.isArray(O))return{};if("method"in O){var R=I(O.method);if(R)return R}else return{};if("params"in O){var R=T(O.params);if(R)return R}else return{};if("session"in O){var R=ee(O.session);if(R)return R}return null}return te(p)}))return console.warn("dropped");this.emit("message",u)},this._iframeParentNode=t==null?void 0:t.iframeParentNode,this._url=e;const n={origin:window.location.origin,session:Math.random().toString().slice(2)};t!=null&&t.name&&(n.name=t.name),t!=null&&t.logo&&(n.logo=t.logo),this._url.hash=new URLSearchParams(n).toString(),window.addEventListener("message",this.listener)}get url(){var e;return(e=this._url)===null||e===void 0?void 0:e.origin}get showIframe(){return this._showIframe}set showIframe(e){e!==this._showIframe&&(this._showIframe=e,this.deliverMessage({method:"showIframe",params:e}),this.emit("builtin",{showIframe:e}),this._iframeNode&&(this._iframeParentNode||(this._iframeNode.style.opacity=e?"1":"0",this._iframeNode.style.pointerEvents=e?"":"none",this._iframeNode.style.touchAction=e?"":"none",this._iframeNode.style.zIndex=e?"1000000":"-1000000",this._iframeNode.style.transform=e?"":"translate(0, 24px)",this._iframeNode.style.transition=e?"opacity 0.36s cubic-bezier(0.22, 1, 0.36, 1), transform 0.36s cubic-bezier(0.22, 1, 0.36, 1)":"opacity 0.1s ease, transform 0.1s ease, z-index 0s linear 0.1s")))}get usePopup(){return this._usePopup}setUsePopup(e){e!==this._usePopup&&(this._usePopup=e,this.emit("builtin",{usePopup:e}))}get requirePopup(){return this._requirePopup}setRequirePopup(e){e!==this._requirePopup&&(this._requirePopup=e,this.emit("builtin",{requirePopup:e}))}get keepPopup(){return this._keepPopup}set keepPopup(e){this._keepPopup=e,this.emit("builtin",{keepPopup:e}),e||this.closePopup(),e&&this.openPopup(!0)}destructor(e){this.closeIframe(),this.closePopup(!0),window.removeEventListener("message",this.listener)}postMessage(e,t){const n=this._promiseController.newMessagePromise(e,t).finally(()=>this.completeRequest());return this.deliverMessage(e),n}openIframe(){if(this._iframeEl)return;this._iframeNode=document.createElement("div"),this._iframeEl=document.createElement("iframe"),this._iframeEl.src=this._url.toString(),this._iframeEl.allow="usb; hid; bluetooth; serial; camera; payment; web-share",this._iframeEl.style.border="none",this._iframeParentNode||(this._iframeEl.width=Oe,this._iframeEl.height=Se,this._iframeEl.style.borderRadius="8px",this._iframeEl.style.maxWidth="100%",this._iframeEl.style.maxHeight="100%",this._iframeNode.style.position="fixed",this._iframeNode.style.inset="0",this._iframeNode.style.display="flex",this._iframeNode.style.alignItems="center",this._iframeNode.style.justifyContent="center",this._iframeNode.style.background="#00000088",this._iframeNode.style.opacity="0",this._iframeNode.style.pointerEvents="none",this._iframeNode.style.touchAction="none",this._iframeNode.style.zIndex="-1000000",this._iframeNode.style.transform="translate(0, 24px)",this._iframeNode.style.transition="opacity 0.1s ease, transform 0.1s ease, z-index 0s linear 0.1s"),this._iframeNode.appendChild(this._iframeEl);const e=new Promise((n,i)=>this._iframe={resolve:n,reject:i});this._iframe.promise=e;const t=()=>{var n;this._iframeParentNode?this._iframeParentNode.appendChild(this._iframeNode):document.body.appendChild(this._iframeNode),this._iframe.window=(n=this._iframeEl)===null||n===void 0?void 0:n.contentWindow};document.readyState==="complete"||document.readyState==="interactive"?t():document.addEventListener("DOMContentLoaded",t)}closeIframe(){var e,t,n,i;(e=this._iframeEl)===null||e===void 0||e.setAttribute("src","about:blank"),(t=this._iframeNode)===null||t===void 0||t.remove(),this._iframeNode=void 0,this._iframeEl=void 0,(i=(n=this._iframe).reject)===null||i===void 0||i.call(n),this._iframe={}}openPopup(e){if(this._popup.window&&!this._popup.window.closed){this._popup.window.focus();return}if(!this.usePopup&&!e)return;window.name="parent";const t=window.open(this._url.toString(),"_blank",`location,resizable,scrollbars,width=${Oe},height=${Se}`),n=new Promise((f,c)=>this._popup={window:t,resolve:f,reject:c});this._popup.promise=n;const i=setInterval(()=>{this._popup.window&&!this._popup.window.closed||(this.keepPopup&&(this.keepPopup=!1),clearInterval(i))},200)}closePopup(e){var t,n,i;!this._popup.window||((t=this._popup.window)===null||t===void 0?void 0:t.closed)||(this.keepPopup||this.requirePopup)&&!e||(this._popup.window.location.href="about:blank",this._popup.window.close(),(i=(n=this._popup).reject)===null||i===void 0||i.call(n),this._popup={})}completeRequest(){setTimeout(()=>{this._pending.length||(this.closePopup(),this.showIframe=!1)},100)}deliverMessage(e,t){var n,i;if(!this._url)throw"Missing URL";console.info("WalletConnector:post",e);const f=Object.assign(Object.assign({},e),{jsonrpc:"2.0"});f.id!=null&&this._pending.push(f.id),this.openIframe(),this._iframe.promise=(n=this._iframe.promise)===null||n===void 0?void 0:n.then(()=>{var c;return(c=this._iframe.window)===null||c===void 0?void 0:c.postMessage(f,this._url.origin,t!=null&&t.transfer?[f]:void 0)}).catch(()=>{}),this.openPopup(),this._popup.promise=(i=this._popup.promise)===null||i===void 0?void 0:i.then(()=>{var c;return(c=this._popup.window)===null||c===void 0?void 0:c.postMessage(f,this._url.origin,t!=null&&t.transfer?[f]:void 0)}).catch(()=>{})}}function kt(s){return typeof s=="object"?s:(s.includes("://")||(s="https://"+s),new URL(s))}let Ne;const D=[],$={},he={};function xt(s){!s.namespaces||(D.find(e=>e===s)||D.push(s),Z())}function Mt(s){if(!D.find(e=>e===s))return Z();D.splice(D.indexOf(s),1);for(const e in s.namespaces)$[e]===s&&(window[e]=he[e],delete he[e],delete $[e]);Z()}function Z(){for(const s of D)for(const e in s.namespaces)$[e]&&$[e]!==s||window[e]!==s.namespaces[e]&&(he[e]=window[e],window[e]=s.namespaces[e],$[e]=s);window.clearInterval(Ne),D.length&&(Ne=setInterval(()=>Z(),1e4))}const Tt="Window context missing. If you are using a server side rendering framework, make sure that the connector is excluded. If you want to use the connector outside the browser, use the node version of the module instead";var ae=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(f){return f instanceof t?f:new t(function(c){c(f)})}return new(t||(t=Promise))(function(f,c){function k(A){try{x(n.next(A))}catch(m){c(m)}}function b(A){try{x(n.throw(A))}catch(m){c(m)}}function x(A){A.done?f(A.value):i(A.value).then(k,b)}x((n=n.apply(s,e||[])).next())})};class U extends He{constructor(e,t){super(),this._session=0,this._listener=n=>{const{method:i,params:f,session:c}=n;if(!(c!=null&&this._session!=c)&&!(!c&&this._session)){if(i==="connect"){if(!H.is(f,k=>{function b(x){return typeof x!="string"?{}:null}return b(k)}))return;this.setAddress(f)}i==="disconnect"&&this.disconnectEvent(!1)}},this._appInfo=e,this._emitterPassthrough=n=>{const i=Object.entries(n)[0];this.emit(i[0],i[1])},this.on("connect",()=>xt(this)),this.on("disconnect",()=>Mt(this)),t&&this.setUrl(t)}get address(){return this._address}setAddress(e){e&&e===this.address||(this._address=e,e!=null?this.emit("connect",e):this.emit("disconnect",e),this.emit("change",e))}get connected(){return this._address!=null}get url(){var e;return(e=this._bridge)===null||e===void 0?void 0:e.url}get showIframe(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.showIframe)||!1}get usePopup(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.usePopup)||!1}get requirePopup(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.requirePopup)||!1}get keepPopup(){var e;return((e=this._bridge)===null||e===void 0?void 0:e.keepPopup)||!1}set keepPopup(e){this._bridge&&(this._bridge.keepPopup=e)}setUrl(e){var t;if(!window){console.error(Tt);return}const n=this._bridge,i=kt(e);if(this._url=i,((t=this._bridge)===null||t===void 0?void 0:t.url)!==i.origin){if(this.disconnect(),!U._bridges[i.origin])this._bridge=new Et(i,this._appInfo),U._bridges[i.origin]={bridge:this._bridge,sessions:[]};else{this._bridge=U._bridges[i.origin].bridge;const f=U._bridges[i.origin].sessions;for(let c=0;c<=f.length;c++)if(f.indexOf(c)<0){this._session=c;break}}U._bridges[i.origin].sessions.push(this._session),this._bridge.on("message",this._listener),this._bridge.on("builtin",this._emitterPassthrough),this._bridge.showIframe!==(n==null?void 0:n.showIframe)&&this.emit("showIframe",this._bridge.showIframe),this._bridge.usePopup!==(n==null?void 0:n.usePopup)&&this.emit("usePopup",this._bridge.usePopup),this._bridge.requirePopup!==(n==null?void 0:n.requirePopup)&&this.emit("requirePopup",this._bridge.requirePopup),this._bridge.keepPopup!==(n==null?void 0:n.keepPopup)&&this.emit("keepPopup",this._bridge.keepPopup)}}connect(e){return ae(this,void 0,void 0,function*(){this._bridge||this._url&&this.setUrl(this._url);const t=new Promise((n,i)=>{this.once("change",f=>f?n(f):i())}).finally(()=>{var n;return(n=this._bridge)===null||n===void 0?void 0:n.completeRequest()});return this._bridge.deliverMessage({method:"connect",params:e}),t})}disconnect(e){return ae(this,void 0,void 0,function*(){return this.disconnectEvent(!0,e)})}disconnectEvent(e,t){return ae(this,void 0,void 0,function*(){if(!this._bridge)return;const n=this._bridge,i=this._session,f=n.url;if(this.setAddress(void 0),this._bridge=void 0,this._session=0,e)try{yield n.postMessage({method:"disconnect",params:[t],session:i})}catch{console.warn("disconnect request failed")}n.off("message",this._listener),n.off("builtin",this._emitterPassthrough),U._bridges[f].sessions=U._bridges[f].sessions.filter(c=>c!=i),setTimeout(()=>{U._bridges[f].sessions.length||(U._bridges[f].bridge.destructor(),delete U._bridges[f])},100)})}postMessage(e,t,n){return new Promise((i,f)=>{if(!this._bridge)return f("URL missing");this.once("disconnect",f),this._bridge.postMessage({method:e,params:t,session:this._session,protocol:n==null?void 0:n.protocol,version:n==null?void 0:n.version},n).then(i).catch(f)})}}U._bridges={};const It=bt(U),Ct=["checked"],Ot=F("h3",{class:"font-bold text-3xl text-center"},"Select your arweave wallet",-1),St=F("figure",null,[F("img",{src:"https://7qx7gbohuua3h7r32vf6ddrjoi7mkdmczz6cdtcq2e3dhdpavd3q.arweave.net/_C_zBcelAbP-O9VL4Y4pcj7FDYLOfCHMUNE2M43gqPc",alt:"ArConnect",height:"200"})],-1),Nt=F("div",{class:"card-body w-full flex bg-neutral rounded-b-xl"},[F("h2",{class:"card-title w-full block text-center"},"ArConnect")],-1),qt=[St,Nt],Ft=F("figure",null,[F("img",{src:"https://yctstiqqys3b4j5qb55sxtn6airb6a56tlwxtkfi36of6cbg2a5a.arweave.net/wKcpohDEth4nsA97K82-AiIfA76a7XmoqN-cXwgm0Do",alt:"Arweave.app",width:"900"})],-1),Ut=F("div",{class:"card-body w-full flex bg-neutral rounded-b-xl"},[F("h2",{class:"card-title w-full block text-center"},"Arweave.app")],-1),Rt=[Ft,Ut],Lt={__name:"ConnectWallet",props:["show"],setup(s){const t=nt(s.show||!1),n=X("wallet",()=>null),i=X("arweave",()=>ut.init({host:"arweave.net",port:443,protocol:"https",timeout:6e4,logging:!1}));X("ardb",()=>new ft(i.value)).value;async function c(){let b=new It({name:"Arweave Nameserver",logo:"https://ioxi6amwxsn3dylpukxmmsa7m56e4xlbtqlqn5psmjsrtp247zha.arweave.net/Q66PAZa8m7Hhb6KuxkgfZ3xOXWGcFwb18mJlGb9c_k4"},"arweave.app");await b.connect(),await b.namespaces.arweaveWallet.getActiveAddress(),n.value=b.namespaces.arweaveWallet}async function k(){window.arweaveWallet.connect(["ACCESS_ADDRESS","ACCESS_PUBLIC_KEY","DISPATCH"]),await window.arweaveWallet.getActiveAddress(),n.value=window.arweaveWallet}return(b,x)=>(ue(),fe(it,null,[F("input",{type:"checkbox",id:"connectWallet",class:"modal-toggle",checked:qe(t)},null,8,Ct),F("div",{class:"modal"},[F("div",{class:"modal-box"},[Ot,F("div",{class:"py-4 flex justify-center"},[F("div",{class:"card card-compact m-2 w-1/3 bg-base-200",onClick:k},qt),F("div",{class:"card card-compact m-2 w-1/3 bg-base-200",onClick:c},Rt)])])])],64))}},Wt={key:0,class:"h-screen"},Dt={key:1,class:"h-full flex flex-row justify-center items-center"},zt={__name:"default",setup(s){let e=X("wallet",()=>null);return(t,n)=>{const i=Lt;return qe(e)?(ue(),fe("div",Wt,[st(t.$slots,"default")])):(ue(),fe("div",Dt,[ot(i,{show:!0})]))}}};export{zt as default};
